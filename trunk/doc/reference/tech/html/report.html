<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#31532;&nbsp;15&nbsp;&#31456;&nbsp;BIRT&#25253;&#34920;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><style type="text/css">
body { background-image: url('images/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="start" href="index.html" title="Leona"><link rel="up" href="index.html" title="Leona"><link rel="prev" href="jbpm.html" title="&#31532;&nbsp;14&nbsp;&#31456;&nbsp;JBPM&#24037;&#20316;&#27969;"><link rel="next" href="groovy.html" title="&#31532;&nbsp;16&nbsp;&#31456;&nbsp;Groovy"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:fo="http://www.w3.org/1999/XSL/Format" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://www.family168.com/" title="Family168"><img src="images/family168.png" border="0"></img></a></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;15&nbsp;&#31456;&nbsp;BIRT&#25253;&#34920;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="jbpm.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="groovy.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="report"></a>&#31532;&nbsp;15&nbsp;&#31456;&nbsp;BIRT&#25253;&#34920;</h2></div></div></div><p>jasperreports, jfreechart, birt&#38656;&#35201;&#36873;&#25321;&#19968;&#20010;&#20351;&#29992;&#12290;</p><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e1902"></a>15.1.&nbsp;&#27010;&#36848;</h2></div></div></div><p>&#32593;&#31449;: http://www.eclipse.org/birt/phoenix/</p><p>BIRT&#25253;&#34920;&#25317;&#26377;&#21644;Dreamweaver&#19968;&#33324;&#30340;&#25805;&#20316;&#30028;&#38754;&#65292;&#21487;&#20197;&#20687;&#30011;table&#19968;&#26679;&#30011;&#25253;&#34920;&#65292;&#29983;&#25104;&#22270;&#29255;&#65292;&#23548;&#20986;Excel&#65292;html&#20998;&#39029;&#26679;&#26679;&#40784;&#20840;&#65292;&#26679;&#24335;&#21644;script&#35774;&#32622;&#31616;&#21333;&#65292;&#35980;&#20284;&#36824;&#26377;OLAP&#23548;&#33322;&#21151;&#33021;&#12290;&#38382;&#39064;&#23601;&#26159;&#22826;&#22823;&#20102;&#65292;&#32780;&#19988;&#27599;&#27425;&#25353;&#29031;springside&#20013;&#30340;&#26041;&#24335;&#65292;&#27599;&#27425;&#37117;&#35201;&#21019;&#24314;&#19968;&#20010;ReportEngine&#30340;&#35805;&#65292;&#24863;&#35273;&#25928;&#29575;&#26159;&#21542;&#20063;&#22826;&#20302;&#20102;&#12290;</p><p>Demo&#20013;&#25226;&#26597;&#35810;&#35821;&#21477;&#32479;&#19968;&#20889;&#22312;Manager&#37324;&#65292;&#23545;&#26597;&#35810;&#35821;&#21477;&#32508;&#21512;&#22788;&#29702;&#19982;&#37325;&#29992;&#65292;&#32780;&#19981;&#26159;&#40664;&#35748;&#30340;&#22312;&#27599;&#20010;&#27169;&#29256;&#25991;&#20214;&#37324;&#38754;&#20889;SQL&#12290;</p><p>&#23398;&#20064;&#36164;&#26009;:</p><div class="orderedlist"><ol type="1"><li><p>Birt&#30340;IBM DW&#30340;&#20013;&#25991;&#25945;&#31243;&#65306;<a class="ulink" href="http://www-128.ibm.com/developerworks/cn/opensource/os-ecl-birt/" target="_top">http://www-128.ibm.com/developerworks/cn/opensource/os-ecl-birt/</a></p></li><li><p>&#26368;&#26435;&#23041;&#12289;&#35814;&#32454;&#30340;&#33707;&#36807;&#20110;birt&#30340; <a class="ulink" href="http://www.eclipse.org/birt/phoenix/" target="_top">&#23448;&#26041;&#25991;&#26723;</a></p></li><li><p>&#38590;&#24471;&#30340;&#27604;&#36739;&#20840;&#38754;&#30340;<a class="ulink" href="http://blogger.org.cn/blog/more.asp?name=sixsun&amp;id=13933" target="_top">BIRT&#20013;&#25991;&#25351;&#21335;</a></p></li><li><p><a class="ulink" href="http://download.eclipse.org/birt/downloads/demos/FirstReport/MyFirstReport.html" target="_top">Flash Demo</a></p></li></ol></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e1921"></a>15.2.&nbsp;&#37096;&#32626;BIRT2.2.2</h2></div></div></div><p>&#23558;/plugins, /configuration&#20004;&#20010;&#30446;&#24405;&#22797;&#21046;&#21040;webapp&#26681;&#30446;&#24405;&#65292; &#23558;lib&#22797;&#21046;&#21040;webapp/WEB-INF/lib</p><p>&#27880;&#24847;birt-2.2.2&#24517;&#39035;&#20351;&#29992;rhino-1.6R7&#12290;&#22914;&#26524;&#20351;&#29992;&#20102;rhino-1.7R1&#23601;&#20250;&#25253;&#38169;&#12290;</p></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e1925"></a>15.3.&nbsp;&#23558;spring&#19982;birt&#38598;&#25104;&#22312;&#19968;&#36215;</h2></div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e1927"></a>15.3.1.&nbsp;why not &#35828;&#26126;</h3></div></div></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="d4e1929"></a>15.3.1.1.&nbsp;&#20026;&#20160;&#20040;&#27809;&#26377;&#20351;&#29992; birt report viewer</h4></div></div></div><p><a class="ulink" href="http://www.eclipse.org/birt/phoenix/deploy/viewerUsage.php" target="_top">BIRT Report Viewer</a>&#35980;&#20284;&#20570;&#24471;&#24456;&#21608;&#21040;&#65292;&#25552;&#20379;&#22914;&#27983;&#35272;&#65292;&#25171;&#21360;&#65292;export to CSV ,&#36807;&#28388;&#21442;&#25968;&#30340;&#20256;&#20837;&#31561;&#19968;&#31995;&#21015;&#30340;&#24555;&#36895;&#25805;&#20316;&#65294;</p><p>&#28982;&#32780;&#32454;&#24515;&#24605;&#32771;&#36807;&#65292;&#36825;&#20010;viewer&#36824;&#26159;&#23384;&#22312;&#19981;&#23569;&#38382;&#39064;&#65306;</p><p>&#22914;&#19981;&#36866;&#29992;&#30340;&#25253;&#34920;&#20256;&#20837;&#21442;&#25968;&#26041;&#24335;(&#26080;&#36755;&#20837;&#39564;&#35777;&#65292;&#26080;&#26085;&#26399;&#25511;&#20214;)&#65307;&#20195;&#30721;&#22797;&#26434;&#65292;&#21487;&#25193;&#23637;&#24615;&#24046;......</p><p>&#20855;&#20307;&#26377;&#24453;&#36827;&#19968;&#27493;&#32771;&#23519;&#12290;</p></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="d4e1936"></a>15.3.1.2.&nbsp;&#20026;&#20160;&#20040;&#19981;&#22312;.rptdesign&#37324;&#20889;sql</h4></div></div></div><p>&#24448;&#24448;&#23454;&#38469;&#39033;&#30446;&#30340;&#19994;&#21153;&#24635;&#26159;&#22797;&#26434;&#30340;&#65292;&#19981;&#24076;&#26395;&#23558;&#22797;&#26434;&#30340;&#36923;&#36753;&#36890;&#36807;&#20960;&#20010;&#31616;&#21333;&#30340;&#21442;&#25968;&#20256;&#20837;&#25340;&#20945;sql&#26469;&#23454;&#29616;&#65292;&#20877;&#35828;&#36825;&#26679;&#35843;&#35797;sql&#20063;&#26159;&#19968;&#20214;&#40635;&#28902;&#30340;&#20107;&#24773;&#65292;&#20063;&#19981;&#21033;&#20110;SQL&#31649;&#29702;</p><p>&#25152;&#20197;&#25552;&#20513;&#23558;&#26597;&#35810;&#30340;&#21830;&#19994;&#36923;&#36753;&#25918;&#22238;java Manager&#31867;&#65292;&#28982;&#21518;designer&#36127;&#36131;&#35774;&#35745;&#25968;&#25454;&#22914;&#20309;&#25490;&#21015;&#12290;&#36825;&#26679;&#23376;&#26356;&#36866;&#21644;&#23454;&#38469;&#39033;&#30446;&#12290;</p></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e1940"></a>15.3.2.&nbsp;&#33258;&#24049;&#23454;&#29616;&#30340;BirtReportsView&#30340;&#21407;&#29702;</h3></div></div></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="d4e1942"></a>15.3.2.1.&nbsp;&#21019;&#24314;EngineConfig&#19982;ReportEngine&#23454;&#20363;</h4></div></div></div><pre class="programlisting">
public class BirtReportsView {
    private String engineHome;
    private ReportEngine engine;
    public BirtReportsView() {
        engineHome = System.getProperty("bookstore.root");  //engine home
        EngineConfig birtConfig = new EngineConfig();
        birtConfig.setEngineHome(engineHome);
        engine = new ReportEngine(birtConfig);
    }
}
                </pre></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="d4e1945"></a>15.3.2.2.&nbsp;&#35774;&#23450;&#25253;&#34920;&#25991;&#20214;</h4></div></div></div><pre class="programlisting">
public void openReportDesign(String filePath) throws IOException, EngineException {
    File reportFilte = new File(engineHome + "/" + filePath);
    IReportRunnable design = engine.openReportDesign(reportFilte.getAbsolutePath());
    task = engine.createRunAndRenderTask(design);
}
                </pre></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="d4e1948"></a>15.3.2.3.&nbsp;&#37197;&#32622;htmlrendercontext</h4></div></div></div><pre class="programlisting">
 private String scriptableJOName = "dsFactory"; //dsFactory &#33258;&#30001;&#23450;&#20041;,&#20027;&#35201;&#22312;rptdesign&#20013;&#35843;&#29992;
 private String imageDirectory = "/report/images";
 private String baseImageUrl = "images";
 private void run(OutputStream outputStream) throws EngineException {
    HTMLRenderContext renderContext =  new HTMLRenderContext();
    //chart &#29983;&#25104;&#22270;&#29255;&#30446;&#24405;
    renderContext.setImageDirectory(this.engineHome + "/" + imageDirectory);
    //web&#39029;&#38754;&#27983;&#35272; base url
    renderContext.setBaseImageURL(baseImageUrl);
    HashMap contextMap = new HashMap();
    contextMap.put(EngineConstants.APPCONTEXT_HTML_RENDER_CONTEXT, renderContext);
    task.setAppContext(contextMap);
    BirtDataSourceObject birtDataSourceObject = new BirtDataSourceObject();
    HTMLRenderOption options = new HTMLRenderOption();
    birtDataSourceObject.setResultList(resultList);
    options.setOutputStream(outputStream);
    task.setRenderOption(options);
    //&#22686;&#21152;api&#32423;&#21035;&#30340;java&#23545;&#35937;,&#20197;&#26041;&#20415;&#25253;&#34920;&#20013;&#35843;&#29992;&#33719;&#21462;&#25253;&#34920;&#25968;&#25454;
    task.addScriptableJavaObject(scriptableJOName, birtDataSourceObject);
    task.run();
}
                </pre><p>&#30456;&#20851;&#25991;&#31456;&#65306;</p><div class="orderedlist"><ol type="1"><li><p><a class="ulink" href="http://tools.osmosis.gr/blog/archives/2005/06/birt_and_object.html" target="_top">BIRT and POJOs as datasources example</a></p></li><li><p>&#35814;&#32454;&#30340; Report Engine API &#35831;&#35265;[<a class="ulink" href="http://www.eclipse.org/birt/phoenix/deploy/reportEngineAPI.php" target="_top">&#23448;&#26041;</a>]</p></li></ol></div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e1959"></a>15.3.3.&nbsp;Birt View&#30340;&#20351;&#29992;</h3></div></div></div><p>&#35265;SaleReprontController.</p><pre class="programlisting">
public ModelAndView view(HttpServletRequest request, HttpServletResponse response) throws Exception {
    String status = request.getParameter("status");
    String beginDate = request.getParameter("beginDate");
    String endDate = request.getParameter("endDate");
    List bookList = saleReportManager.findBooksByReportParam(status,
        DateUtil.parse(beginDate, "yyyy-M-d"), DateUtil.parse(endDate, "yyyy-M-d"));
    BirtReportView view = new BirtReportView();
    view.openReportDesign("/report/sale_report.rptdesign");
    view.putModel(bookList);
    return new ModelAndView(view);
}
            </pre></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="jbpm.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="groovy.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;14&nbsp;&#31456;&nbsp;JBPM&#24037;&#20316;&#27969;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;16&nbsp;&#31456;&nbsp;Groovy</td></tr></table></div></body></html>