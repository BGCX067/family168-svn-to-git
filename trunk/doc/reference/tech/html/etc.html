<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#31532;&nbsp;22&nbsp;&#31456;&nbsp;&#26434;&#39033;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><style type="text/css">
body { background-image: url('images/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="start" href="index.html" title="Leona"><link rel="up" href="index.html" title="Leona"><link rel="prev" href="test.html" title="&#31532;&nbsp;21&nbsp;&#31456;&nbsp;&#27979;&#35797;"><link rel="next" href="future.html" title="&#31532;&nbsp;23&nbsp;&#31456;&nbsp;&#30475;&#21040;Spring Side&#25110;&#20854;&#20182;&#22320;&#26041;&#26377;&#20102;&#20363;&#23376;&#65292;&#20294;leona&#30340;&#25216;&#26415;&#36873;&#22411;&#37324;&#36824;&#27809;&#26377;&#23454;&#29616;&#30340;&#25216;&#26415;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:fo="http://www.w3.org/1999/XSL/Format" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://www.family168.com/" title="Family168"><img src="images/family168.png" border="0"></img></a></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;22&nbsp;&#31456;&nbsp;&#26434;&#39033;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="test.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="future.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="chapter" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title"><a name="etc"></a>&#31532;&nbsp;22&nbsp;&#31456;&nbsp;&#26434;&#39033;</h2></div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e2507"></a>22.1.&nbsp;JDK-5.0</h2></div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2509"></a>22.1.1.&nbsp;AutoBoxing</h3></div></div></div><p>&#19981;&#29992;&#22312;Integer&#21644;int&#20043;&#38388;&#36153;&#21170;&#30340;&#36716;&#25442;&#20102;&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2512"></a>22.1.2.&nbsp;For Loop Enhancement</h3></div></div></div><p>for (item : array)&#30340;&#24418;&#24335;&#25903;&#25345;Collection&#21644;Array&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2515"></a>22.1.3.&nbsp;Annotation</h3></div></div></div><p>Annotation&#20027;&#35201;&#29992;&#20110;Hibernate</p><p>&#27867;&#22411;&#20027;&#35201;&#29992;&#20110;&#23454;&#29616;&#25277;&#35937;HibernateEntityDao</p><p>JDK5.0&#26377;SuppressWarnings&#65292;Deprecated&#21644;Override &#19977;&#31181;&#20869;&#32622;&#30340;annotation&#65306;</p><p>@Override&#65292;&#27492;&#26631;&#31614;&#19968;&#26041;&#38754;&#25552;&#37266;&#29992;&#25143;&#36825;&#26159;&#20010;&#37325;&#36733;&#20989;&#25968;&#65292;&#21478;&#19968;&#26041;&#38754;&#20445;&#35777;&#20102;&#29238;&#31867;&#20989;&#25968;&#30340;&#21442;&#25968;&#25110;&#32773;&#21517;&#23383;&#25913;&#21464;&#26102;&#65292;&#23376;&#31867;&#22914;&#26524;&#27809;&#26377;&#36319;&#30528;&#21464;&#21270;&#65292;&#23601;&#20250;&#32534;&#35793;&#19981;&#36807;&#12290;</p><p>@SuppressWarnings("unchecked")&#65292;&#27492;&#26631;&#31614;&#21487;&#20197;&#35753;&#32534;&#35793;&#22120;&#24573;&#30053;&#26576;&#31181;warning&#20449;&#24687;&#65292;&#27604;&#22914;&#20943;&#23569;JDK5.0&#30340;&#38598;&#21512;&#25805;&#20316;&#24341;&#20837;&#33539;&#22411;&#21518;&#26080;&#22788;&#19981;&#22312;&#30340;warning&#12290;&#22240;&#20026;&#26377;&#20123;&#38750;JDK5.0&#30340;&#24320;&#28304;&#24211;&#22914;hibernate, &#20989;&#25968;&#36820;&#22238;&#30340;&#19968;&#23450;&#26159;List&#65292;&#32780;&#19981;&#20250;&#26159;List&lt;User&gt;&#65292;&#36825;&#26102;&#20505;IDE&#23601;&#20250;&#29190;&#20986;&#24456;&#22810;warning&#12290;&#29992;SuppressWarning("unchecked")&#21487;&#20197;&#35753;IDE&#23433;&#38745;&#19968;&#20123;&#12290;&#20854;&#20182;&#24120;&#29992;warning&#36824;&#21253;&#25324; @SuppressWarnings("unused") &#21644; SuppressWarnings("serial")</p><p> @Deprecated&#65292;&#27492;&#26631;&#31614;&#20197;&#21069;&#20889;&#22312;JavaDoc&#37324;&#65292;&#29616;&#22312;&#25552;&#21040;annotation&#65292;&#27880;&#37322;&#24050;&#24223;&#24323;&#30340;&#20989;&#25968;&#12290;&#29992;&#25143;&#20351;&#29992;&#35813;&#20989;&#25968;&#30340;&#35805;&#65292;&#32534;&#35793;&#26102;&#20250;&#24471;&#21040;"&#20320;&#29992;&#20102;&#24223;&#24323;"&#30340;&#25552;&#31034;&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2523"></a>22.1.4.&nbsp;&#38745;&#24577;import</h3></div></div></div><p>&#22312;&#20351;&#29992;EasyMock&#30340;&#27979;&#35797;&#29992;&#20363;&#37324;&#65292;&#38745;&#24577;&#23548;&#20837;EasyMock&#65292;&#20351;&#24471;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;&#20854;&#38745;&#24577;&#20989;&#25968;&#12290;&#30475;&#36215;&#26469;&#23601;&#20687;&#37027;&#20123;&#26041;&#27861;&#37117;&#23646;&#20110;&#26412;&#27979;&#35797;&#29992;&#20363;&#30340;&#12290;</p><pre class="programlisting">
import static org.easymock.classextension.EasyMock.*;
public void testList() throws Exception {
    //&#24405;&#21046;bookManager findAllBy&#21644;getAllCategorys&#26041;&#27861;&#30340;&#26399;&#26395;&#20540;
    expect(mockManager.findBy(null, new HashMap())).andReturn(new Page());
    replay(mockManager);
}
            </pre></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2527"></a>22.1.5.&nbsp;&#21487;&#21464;&#21442;&#25968;</h3></div></div></div><p>&#21487;&#21464;&#21442;&#25968;&#33267;&#23569;&#21487;&#20197;&#35299;&#20915;&#21516;&#26102;&#38656;&#35201;find(String sql,String arg), find(sql,String[] args) &#36825;&#26679;&#30340;&#21452;&#25509;&#21475;&#38382;&#39064;&#12290;</p><p>&#21478;&#22806;&#65292;&#22312;find&#20989;&#25968;&#37324;&#65292;find(sql,arg1,arg2,arg3) &#20063;&#27604;find(sql,new String[]{arg1,arg2,arg3} ) &#31616;&#27905;&#26126;&#20102;&#12290;</p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e2531"></a>22.2.&nbsp;&#20844;&#20849;Utils&#24037;&#20855;&#31867;&#12290;</h2></div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2533"></a>22.2.1.&nbsp;Core Utils</h3></div></div></div><p>ReflectionUtils&#65292;&#25552;&#20379;&#24378;&#21046;&#30452;&#25509;&#35775;&#38382;&#38544;&#21547;&#23646;&#24615;&#30340;&#33021;&#21147;&#65292;&#20197;&#21450;&#25552;&#20379;&#33719;&#21462;&#38598;&#21512;&#20013;&#20803;&#32032;&#30340;&#23646;&#24615;&#65292;&#32452;&#25104;&#19968;&#20010;List&#25110;&#23383;&#31526;&#20018;&#30340;&#20989;&#25968;&#12290;</p><p>DozerMapperSingleton&#65292;Dozer4.0&#33258;&#24102;&#30340;DozerBeanMapperSingletonWrapper&#24517;&#39035;&#20351;&#29992;dozerBeanMapping.xml&#20316;&#21442;&#25968;&#21021;&#22987;&#21270;, &#22240;&#27492;&#37325;&#26032;&#23454;&#29616;.</p><p>JulOverSlf4jInit&#65292;&#35843;&#29992;SLF4JBridgeHandler.init()&#65292;&#21021;&#22987;&#21270;java.util.logging&#30340;&#26085;&#24535;&#35831;&#27714;&#21040;slf4j&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2538"></a>22.2.2.&nbsp;Apache Commons Utils</h3></div></div></div><p>Commons BeanUtils&#65292;&#20027;&#35201;&#30340;&#21453;&#23556;&#25805;&#20316;Utils&#12290;</p><p>BeanUtils&#33021;&#22815;&#33719;&#24471;&#20415;&#25463;&#30340;&#21453;&#23556;&#20989;&#25968;&#23553;&#35013;&#21450;&#23545;&#23884;&#22871;&#23646;&#24615;&#65292;map,array&#22411;&#23646;&#24615;&#30340;&#35835;&#21462;&#12290;&#20854;&#20013;&#65292;BeanUtils&#23558;Bean&#23646;&#24615;&#35835;&#21462;&#36716;&#21270;&#20026;String,&#32780;PropertyUtils&#23558;&#25353;&#21407;&#26469;&#30340;&#23646;&#24615;&#21407;&#26469;&#30340;&#31867;&#22411;&#35835;&#21462;&#12290;</p><p>Commons Lang StringUtils&#65292;&#20027;&#35201;&#30340;&#23383;&#31526;&#20018;&#25805;&#20316;Utils&#12290;</p><p>Commons Lang ToStringBuilder&#65292;&#23454;&#29616;ToString&#20989;&#25968;&#65292;&#21453;&#23556;&#25152;&#26377;&#23646;&#24615;&#65292;&#29992;&#20110;Entity&#31867;&#30340;&#31616;&#21333;toString()&#20989;&#25968;&#12290;</p><p>CollectionUtils&#37324;&#38754;&#26377;&#38750;&#24120;&#22810;&#30340;Utils&#26041;&#27861;&#65292;&#22312;&#20570;&#20219;&#20309;&#20887;&#38271;&#30340;&#38598;&#21512;&#25805;&#20316;&#20043;&#21069;&#37117;&#24212;&#35813;&#20808;&#30475;&#30475;&#26377;&#27809;&#26377;&#30456;&#24212;&#30340;Utils&#12290;&#21478;&#22806;&#65292;Collections &#34917;&#20805;&#20102;JDK&#25152;&#27809;&#26377;&#30340;Nullable Comparetor, Chain Comparetor&#31561;&#37325;&#35201;&#37096;&#20998;&#12290;</p><p>Jakarta Configuration&#20316;&#20026;&#32479;&#19968;&#30340;Configuration&#25509;&#21475;&#65292;&#25903;&#25345;Properties, XML, DataBase</p><div class="itemizedlist"><ul type="disc"><li><p>&#21487;&#20197;&#19968;&#27425;&#35835;&#21462;&#22810;&#20010;properties&#25991;&#20214;</p></li><li><p>&#21487;&#20197;&#20570;getStringList(), getInt()&#36825;&#26679;&#30340;&#33258;&#21160;&#36716;&#25442;</p></li><li><p>&#21487;&#20197;&#25903;&#25345;ant&#37027;&#26679;&#30340;&#21464;&#37327; my.color=$</p></li><li><p>&#21487;&#20197;&#29992;XML Path&#35835;&#21462;XML&#25991;&#20214;&#37324;&#30340;&#21464;&#37327;&#12290;</p></li></ul></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2555"></a>22.2.3.&nbsp;SpringUtils</h3></div></div></div><p>ResourceLoader&#65292;&#24456;&#22909;&#30340;&#29992;&#31867;&#20284;Ant&#30340;&#34920;&#36798;&#24335;&#65292;&#35013;&#36733;&#21508;&#31181;&#25991;&#20214;&#36164;&#28304;</p><pre class="programlisting">
/WEB-INF/*-context.xml
    com/mycompany/**/applicationContext.xml
    file:C:/some/path/*-context.xml
    classpath:com/mycompany/**/applicationContext.xml
            </pre><p>Assert&#65292;&#20351;&#29992;Spring&#30340;Assert&#31867;&#65292;&#23558;&#23545;&#20989;&#25968;&#36755;&#20837;&#21442;&#25968;&#36827;&#34892;&#21508;&#31181;&#24418;&#24335;&#30340;&#26657;&#39564;&#65292;&#22914;&#38598;&#21512;&#38750;&#31354;&#65292;&#23383;&#31526;&#20018;&#21547;&#23383;&#31526;&#31561;&#65292;&#21542;&#21017;&#23558;&#25243;&#20986;&#21442;&#25968;&#24322;&#24120;&#38169;&#35823;&#12290;</p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e2560"></a>22.3.&nbsp;JavaMail&#12290;</h2></div></div></div><p>&#31867;org.springframework.mail.javamail.JavaMailSenderImpl&#25552;&#20379;&#20102;&#26368;&#30452;&#25509;&#30340;&#21457;&#36865;  &#25105;&#20204;&#30452;&#25509;&#29992;&#36825;&#20010;&#31867;&#26469;&#23436;&#25104;&#37038;&#20214;&#30340;&#21457;&#36865; </p><p>Spring&#37038;&#20214;&#25277;&#35937;&#23618;&#30340;&#20027;&#35201;&#21253;&#20026;org.springframework.mail&#12290;&#23427;&#21253;&#25324;&#20102;&#21457;&#36865;&#30005;&#23376;&#37038;&#20214;&#30340;&#20027;&#35201;&#25509;&#21475;MailSender&#21644;&#23553;&#35013;&#20102;&#31616;&#21333;&#37038;&#20214;&#30340;&#23646;&#24615;&#22914;from, to, cc, subject, text&#30340;&#20540;&#23545;&#35937;&#21483;&#20570;SimpleMailMessage&#12290;&#19968;&#20010;&#20197;MailException&#20026;root&#30340;checked Exception&#32487;&#25215;&#26641;&#65292;&#23427;&#20204;&#25552;&#20379;&#20102;&#23545;&#24213;&#23618;&#37038;&#20214;&#31995;&#32479;&#24322;&#24120;&#30340;&#39640;&#32423;&#21035;&#25277;&#35937;&#12290;&#35831;&#21442;&#32771;JavaDocs&#26469;&#24471;&#21040;&#20851;&#20110;&#37038;&#20214;&#24322;&#24120;&#23618;&#27425;&#30340;&#26356;&#22810;&#30340;&#20449;&#24687;&#12290;</p><p>&#20026;&#20102;&#20351;&#29992;JavaMail&#20013;&#30340;&#19968;&#20123;&#29305;&#33394;&#22914;MIME&#31867;&#22411;&#30340;&#28040;&#24687;&#65292;Spring&#20063;&#25552;&#20379;&#20102;&#19968;&#20010;MailSender&#30340;&#23376;&#25509;&#21475;, &#21517;&#20026;org.springframework.mail.javamail.JavaMailSender&#65292;&#21516;&#26102;&#20063;&#25552;&#20379;&#20102;&#19968;&#20010;&#23545;JavaMail&#30340;MIME&#31867;&#22411;&#30340;&#28040;&#24687;&#20998;&#22359;&#30340;&#22238;&#35843;interface&#65292;&#21517;&#20026;org.springframework.mail.javamail.MimeMessagePreparator</p><p>&#39318;&#20808;&#65292;&#20462;&#25913;mail.properties &#25991;&#20214;</p><pre class="programlisting">
mail.host=smtp.163.com
mail.password=xxxx
mail.username=xxxx
        </pre><p>&#19968;&#30475;&#23601;&#30693;&#36947;HOST&#65292;&#26381;&#21153;&#21517;&#65292;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#30340;&#35774;&#32622;</p><p>&#31532;&#20108;&#65292;&#32473;applicationContext-mail.xml&#25991;&#20214;&#20943;&#32933;</p><pre class="programlisting">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd"&gt;
&lt;beans default-autowire="byName" default-lazy-init="true"&gt;
    &lt;!-- &#20351;&#29992;Spring&#23553;&#35013;&#30340;Mail Sender --&gt;
    &lt;bean id="mailSender"
        class="org.springframework.mail.javamail.JavaMailSenderImpl"&gt;
        &lt;property name="host" value="${mail.host}" /&gt;
        &lt;property name="username" value="${mail.username}" /&gt;
        &lt;property name="password" value="${mail.password}" /&gt;
        &lt;property name="javaMailProperties"&gt;
            &lt;props&gt;
                &lt;prop key="mail.smtp.auth"&gt;true&lt;/prop&gt;
                &lt;prop key="mail.smtp.timeout"&gt;25000&lt;/prop&gt;
            &lt;/props&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
        </pre></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e2570"></a>22.4.&nbsp;UTF-8&#19982;&#22269;&#38469;&#21270;&#12290;</h2></div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2572"></a>22.4.1.&nbsp;i18N&#22522;&#30784;</h3></div></div></div><div class="orderedlist"><ol type="1"><li><p>&#32534;&#20889;messages.zh_CN.properties</p><p>&#29992;&#20013;&#25991;&#20889;&#23436;&#21518;&#65292;&#29992;java&#24102;&#30340;native2ascii.exe&#25110;&#32773;ant&#30340;native&#20219;&#21153;&#25226;&#23427;&#36716;&#25104;&#38750;&#20154;&#31867;&#30340;Unicode&#32534;&#30721;&#12290;</p></li><li><p>&#22312;&#32431;Java API&#37324;&#65292;&#22269;&#38469;&#21270;&#26159;&#36825;&#26679;&#20570;&#30340;&#65306;</p><pre class="programlisting">
ResourceBundle rb = ResourceBundle.getBundle("messages");
String welcome = rb.getString("welcome");
String welcomeCalvin =   MessageFormat.format(welcome,new String[]{"calvin"});
                    </pre><p>&#31532;&#19968;&#20108;&#21477;&#20174;classpath&#37324;&#25214;&#21040;messages_zh_CN.properties&#65292;&#35835;&#20986;"&#27426;&#36814;&#20320;&#65292;{0}"&#23383;&#26679;&#12290;</p><p>&#31532;&#19977;&#21477;&#25226;&#19978;&#25991;&#26684;&#24335;&#21270;&#25104;"&#27426;&#36814;&#20320;&#65292;family168"</p></li><li><p>&#22312;Servlet&#29615;&#22659;&#19979;&#65292;&#22269;&#38469;&#21270;&#26159;&#36825;&#26679;&#20570;&#30340;</p><p>&#21017;&#38752;&lt;fmt:message&gt;tag</p><pre class="programlisting">
&lt;%@ taglib uri="http://java.sun.com/jstl/fmt" prefix="fmt" %&gt;
&lt;fmt:message key="welcome"/&gt;
                    </pre><p>&#21487;&#20197;&#29992;context-param&#26469;&#23450;&#20041;&#40664;&#35748;&#30340;properties&#25991;&#20214;</p><pre class="programlisting">
&lt;context-param&gt;
    &lt;param-name&gt;javax.servlet.jsp.jstl.fmt.localizationContext&lt;/param-name&gt;
    &lt;param-value&gt;messages&lt;/param-value&gt;
&lt;/context-param&gt;
                    </pre><p>&#19981;&#36807;&#36825;&#26679;&#23450;&#20041;&#30340;&#32570;&#28857;&#26159;&#21482;&#33021;&#23450;&#20041;&#19968;&#20010;&#25991;&#20214;&#65292;&#22914;&#26524;&#25152;&#26377;&#20449;&#24687;&#37117;&#38598;&#20013;&#22312;&#19968;&#20010;&#25991;&#20214;&#20250;&#22909;&#38271;&#65292;&#32780;&#22914;&#26524;&#26377;&#22810;&#20010;properties&#65292;&#23601;&#24799;&#26377;&#22312;&#39029;&#38754;&#29992;&lt;fmt:bundle&gt;&#32465;&#23450;&#20102;&#12290;</p></li></ol></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2590"></a>22.4.2.&nbsp;Spring&#30340;messageSource&#22686;&#24378;</h3></div></div></div><p>&#19968;&#26159;ApplicationContext&#23558;&#20805;&#24403;&#19968;&#20010;&#21333;&#20363;&#30340;&#35282;&#33394;&#65292;&#19981;&#20877;&#38656;&#35201;&#27599;&#27425;&#20351;&#29992;i18&#26102;&#37117;&#21021;&#22987;&#21270;&#19968;&#27425;ResourceBundle</p><p>&#20108;&#26159;&#21487;&#20197;&#20195;&#34920;&#22810;&#20010;Resource Bundle.</p><p>&#22312;ApplicationContext&#30340;&#23450;&#20041;&#25991;&#20214;&#20013;&#65292;&#22686;&#21152;&#22914;&#19979;&#33410;&#28857;&#65306;</p><pre class="programlisting">
&lt;bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource"&gt;
    &lt;property name="basename" value= "messages"/&gt;
&lt;/bean&gt;
            </pre><p>&#22312;pure Java&#20013;</p><pre class="programlisting">
context.getMessage("welcome", null, LocaleContextHolder.getLocale())
            </pre><p>&#32780;&#32463;Spring MVC JSTL ViewResolver&#35843;&#29992;&#30340;JSP&#65292;&lt;fmt:message&gt;&#23558;&#32487;&#32493;&#21457;&#25381;&#23427;&#30340;&#21151;&#25928;&#12290;</p><p>&#19981;&#36807;&#36825;&#37324;&#25402;&#40635;&#28902;&#30340;&#65292;&#31532;&#19968;&#22914;&#26524;&#19981;&#26159;&#20174;MVC JSTL&#36716;&#30340;&#65292;messageSource&#30340;&#23450;&#20041;&#23601;&#20250;&#22833;&#25928;&#12290;&#32780;&#22914;&#26524;&#23450;&#20041;&#20102;&lt;context-param&gt;&#65292;&#21017;messageSource&#30340;&#23450;&#20041;&#21448;&#20250;&#22833;&#25928;.......</p><p>&#36824;&#26377;&#65292;&lt;spring:message&gt; &#40481;&#32907;&#19968;&#22359;&#65292;&#22240;&#20026;&#23427;&#22914;&#26524;&#25214;&#19981;&#21040;key&#23545;&#24212;&#30340;&#23601;&#20250;&#25243;&#24322;&#24120;&#65292;&#22909;&#24656;&#24598;&#12290;</p><p>&#36824;&#36824;&#26377;&#65292;spring&#36824;&#26377;&#26377;&#36259;&#30340;theme&#26426;&#21046;&#65292;&#21644;i18n&#19968;&#26679;&#30340;&#21407;&#29702;&#65292;&#35299;&#20915;&#20102;"&#20570;&#25104;&#22270;&#29255;&#30340;&#25991;&#23383;"&#30340;&#22269;&#38469;&#21270;&#65292;&#35753;&#19981;&#21516;&#35821;&#35328;&#30340;&#32654;&#26415;&#23383;&#22270;&#29255;&#30340;&#36335;&#24452;&#20998;&#21035;&#23450;&#20041;&#22312;theme_zh_CN.properties&#21644;theme_en_US.properties&#37324;&#38754;&#12290;</p></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e2602"></a>22.5.&nbsp;&#24322;&#24120;&#22788;&#29702;</h2></div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2604"></a>22.5.1.&nbsp;&#19994;&#21153;&#24322;&#24120;&#31867;</h3></div></div></div><p>&#25152;&#26377;&#19994;&#21153;&#24322;&#24120;&#31867;&#27966;&#29983;&#20110;BusinessException&#22522;&#31867;&#12290;</p><p>&#21407;&#21017;&#19978;&#65292;&#35201;&#36827;&#34892;&#30456;&#21516;&#22788;&#29702;&#30340;&#24322;&#24120;&#20998;&#20026;&#19968;&#31867;&#65292;&#29992;ERROR_CODE&#26631;&#35782;&#19981;&#21516;&#12290;</p><p>&#20986;&#38169;&#20449;&#24687;&#32479;&#19968;&#20889;&#22312;errors.properties&#65292;&#20197;ERROR_CODE&#20026;&#20027;&#38190;&#65292;&#25903;&#25345;i18N&#65292;&#30001;&#22522;&#31867;&#25552;&#20379;&#40664;&#35748;&#30340;getMessage()&#20989;&#25968;&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2609"></a>22.5.2.&nbsp;Servlet&#35268;&#33539;&#37324;&#30340;&#24322;&#24120;&#25511;&#21046;</h3></div></div></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="d4e2611"></a>22.5.2.1.&nbsp;&#25353;error-code&#32479;&#19968;&#23450;&#20041;&#38169;&#35823;&#39029;&#38754;</h4></div></div></div><pre class="programlisting">
&lt;error-page&gt;
    &lt;error-code&gt;404&lt;/error-code&gt;
    &lt;location&gt;/404.jsp&lt;/location&gt;
&lt;/error-page&gt;
&lt;error-page&gt;
    &lt;error-code&gt;500&lt;/error-code&gt;
    &lt;location&gt;/error.jsp&lt;/location&gt;
&lt;/error-page&gt;
                </pre></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="d4e2614"></a>22.5.2.2.&nbsp;&#25353;&#24322;&#24120;&#31867;&#22411;&#23450;&#20041;&#21333;&#29420;&#38169;&#35823;&#39029;&#38754;</h4></div></div></div><pre class="programlisting">
&lt;error-page&gt;
    &lt;exception-type&gt;org.sprngside.bookstore.UserNotFound&lt;/exception-type&gt;
    &lt;location&gt;/userNotFound.jsp&lt;/location&gt;
&lt;/error-page&gt;
                </pre></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="d4e2617"></a>22.5.2.3.&nbsp;&#22312;JSP&#37324;&#21333;&#29420;&#23450;&#20041;&#38169;&#35823;&#39029;&#38754;</h4></div></div></div><pre class="programlisting">
&lt;@ errorPage="error.jsp"&gt;
                </pre></div><div class="sect3" lang="zh-cn"><div class="titlepage"><div><div><h4 class="title"><a name="d4e2620"></a>22.5.2.4.&nbsp;error.jsp&#30340;&#22788;&#29702;</h4></div></div></div><p>error.jsp&#20250;&#21516;&#26102;&#22788;&#29702;jsp,servlet,&#21644;spring&#25243;&#36807;&#26469;&#30340;&#24322;&#24120;</p><p>&#20854;&#20013;jsp&#30340;&#24322;&#24120;&#22312;exception &#21464;&#37327;&#20013;.</p><p>servlet&#30340;&#24322;&#24120;&#22312;(Exception)request.getAttribute("javax.servlet.error.exception")</p><p>spring&#30340;&#24322;&#24120;&#22312;(Exception) request.getAttribute("exception")</p><p>&#20351;&#29992;(String) request.getAttribute("javax.servlet.error.request_uri")&#33719;&#24471; request_uri</p><p>&#20351;&#29992;logger.error(exception.getMessage(), exception); &#35760;&#24405;&#25972;&#20010;&#24322;&#24120;&#26632;</p></div></div></div><div class="sect1" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e2628"></a>22.6.&nbsp;&#20107;&#21153;</h2></div></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2630"></a>22.6.1.&nbsp;&#26412;&#22320;&#20107;&#21153;&#19982;&#20998;&#24067;&#24335;&#20107;&#21153;</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>&#26412;&#22320;&#20107;&#21153;</p><p>&#23436;&#20840;&#20381;&#36182;&#20110;DB&#12289;JMS&#33258;&#36523;&#65292;&#22914;&#30452;&#25509;&#35843;&#29992;jdbc&#20013;&#30340;conn.commit();&#36825;&#37324;&#27809;&#24212;&#29992;&#26381;&#21153;&#22120;&#20160;&#20040;&#20107;&#65292;&#25152;&#20197;&#20063;&#19981;&#25903;&#25345;&#22810;&#25968;&#25454;&#28304;&#30340;&#20840;&#23616;&#20107;&#21153;&#12290;</p></li><li><p>&#20998;&#24067;&#24335;&#20107;&#21153;</p><p>&#22312;JavaEE&#19990;&#30028;&#30340;&#20107;&#21153;&#22312;JTA&#12289;JTS&#35268;&#33539;&#21644;XA Sources&#20043;&#19978;&#23454;&#29616;&#12290;</p><p>JTA&#26159;&#29992;&#25143;&#32534;&#31243;&#25509;&#21475;&#65292;JTS&#26159;&#26381;&#21153;&#22120;&#24213;&#23618;&#26381;&#21153;&#65292;&#20004;&#32773;&#19968;&#33324;&#30001;&#24212;&#29992;&#26381;&#21153;&#22120;&#33258;&#24102;&#23454;&#29616;&#65292;&#32780;atomikos&#12289;JOTM&#21644;JBoss Transaction&#26159;&#19987;&#38376;&#25630;&#23616;&#25250;&#29983;&#24847;&#30340;&#12290;</p><p>XA Sources&#20854;&#23454;&#20808;&#20110;JavaEE&#32780;&#23384;&#22312;&#65292;JDBC driver&#24517;&#39035;&#26377;javax.sql.XADataSource&#25509;&#21475;&#30340;&#23454;&#29616;&#31867;&#65292;&#21542;&#21017;&#25152;&#35859;&#20108;&#38454;&#27573;&#25552;&#20132;&#23601;&#26159;&#20010;&#20266;&#33021;&#21147;&#12290;</p><p>JavaEE&#38500;&#20102;&#25903;&#25345;JDBC&#21644;JMS&#22806;&#65292;&#36824;&#24341;&#20837;&#20102;JCA&#27169;&#22411;&#12290;JCA&#21487;&#20197;&#35828;&#26159;&#30446;&#21069;&#21807;&#19968;&#21487;&#31227;&#26893;&#30340;&#25554;&#20837;JavaEE&#20107;&#21153;&#30340;&#36164;&#28304;&#27169;&#22411;&#65292;&#22240;&#27492;&#20687;JDO&#36825;&#31867;&#26694;&#26550;/Server&#23601;&#26159;&#38752;&#20054;&#20054;&#20986;&#33258;&#24049;&#30340;JCA&#36830;&#25509;&#22120;&#26469;&#21442;&#19982;JavaEE&#20107;&#21153;&#30340;&#12290;</p></li></ul></div></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2642"></a>22.6.2.&nbsp;&#32534;&#31243;&#24335;&#27169;&#22411;</h3></div></div></div><p>&#25163;&#24037;&#35843;&#29992;jdbc&#30340;connection&#20107;&#21153;&#26041;&#27861;&#21644;&#20351;&#29992;JTA&#25509;&#21475;&#37117;&#23646;&#20110;&#32534;&#31243;&#24335;&#24320;&#21457;&#65292;&#22312;EJB&#20013;&#21483;BMT(Bean&#31649;&#29702;&#20107;&#21153;)&#12290;</p><p>JTA&#26368;&#37325;&#35201;&#30340;&#25509;&#21475;&#23601;&#26159;UserTransaction&#21644;&#23427;&#30340;&#20845;&#20010;&#26041;&#27861;</p><p>begin&#65292;commit&#65292;rollback&#65292;getStatus&#65292;setRollbackonly&#65292;setTransactionTimeout&#12290;</p><p>&#31243;&#24207;&#38656;&#35201;UserTransaction&#26102;&#21487;&#20197;&#20174;JNDI&#39046;&#21462;&#65292;&#19981;&#36807;JNDI&#21517;&#38543;&#24212;&#29992;&#26381;&#21153;&#22120;&#19981;&#21516;&#32780;&#19981;&#21516;&#12290;EJB3&#37324;&#21487;&#20197;&#30452;&#25509;&#29992;&#20010;@Resource&#27880;&#20837;&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2648"></a>22.6.3.&nbsp;&#23459;&#21578;&#24335;&#27169;&#22411;</h3></div></div></div><p>&#21069;&#38754;&#37117;&#26159;&#38138;&#22443;&#65292;&#36825;&#20010;&#25165;&#26159;&#20027;&#25171;&#30340;&#20107;&#21153;&#27169;&#22411;&#65292;&#22914;EJB&#30340;CMT(&#23481;&#22120;&#31649;&#29702;&#20107;&#21153;)&#21644;Spring&#12290;</p><p>&#20854;&#20013;EJB2.0&#65292;Spring1.0&#22312;&#37096;&#32626;&#25551;&#36848;&#31526;&#21644;applicationContext.xml&#20013;&#23450;&#20041;&#65292;&#32780;EJB3.0&#21644;Spring2.0&#21017;&#37319;&#29992;annotation&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2652"></a>22.6.4.&nbsp;&#20107;&#21153;&#31867;&#22411;</h3></div></div></div><p>&#36825;&#37324;JavaEE&#19982;Spring&#30340;&#23450;&#20041;&#22522;&#26412;&#30456;&#21516;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>Required&#65306;&#22914;&#26524;Context&#20013;&#26377;&#20107;&#21153;&#23601;&#21152;&#20837;&#65292;&#27809;&#26377;&#23601;&#33258;&#24049;&#21019;&#24314;&#19968;&#20010;&#12290;(&#26368;&#24120;&#29992;&#35774;&#32622;)</p></li><li><p>Mandatory&#65306;&#27704;&#36828;&#21152;&#20837;&#19968;&#20010;&#20107;&#21153;&#12290;&#22914;&#26524;&#24403;&#21069;Context&#27809;&#26377;&#20107;&#21153;&#65292;&#25243;&#20986;&#24322;&#24120;&#12290;(&#37027;&#20123;&#19981;&#25171;&#31639;&#33258;&#24049;&#36127;&#36131;rollback&#20107;&#21153;&#30340;&#26041;&#27861;&#65292;&#24517;&#39035;&#21152;&#20837;&#21040;&#21035;&#20154;&#30340;&#20107;&#21153;&#65292;&#30001;&#21035;&#20154;&#26469;&#25511;&#21046;rollback)</p></li><li><p>RequiresNew&#65306;&#27704;&#36828;&#26032;&#24314;&#19968;&#20010;&#20107;&#21153;&#12290;(&#37027;&#20123;&#19981;&#31649;&#21035;&#20154;&#22914;&#20309;&#65292;&#33258;&#24049;&#24517;&#39035;&#25552;&#20132;&#20107;&#21153;&#30340;&#26041;&#27861;&#65292;&#27604;&#22914;&#23457;&#35745;&#20449;&#24687;&#26159;&#19968;&#23450;&#35201;&#20889;&#30340;)</p></li><li><p>Supports&#65306;&#22914;&#26524;&#26377;&#20107;&#21153;&#23601;&#21152;&#20837;&#65292;&#22914;&#26524;&#27809;&#26377;&#23601;&#31639;&#20102;&#12290;&#27704;&#36828;&#19981;&#20250;&#21019;&#24314;&#26032;&#20107;&#21153;&#12290;(&#19968;&#33324;&#29992;&#20110;&#21482;&#35835;&#26041;&#27861;&#65292;&#19981;&#20250;&#20027;&#21160;&#21019;&#24314;&#20107;&#21153;&#65292;&#20294;&#22914;&#26524;&#24403;&#21069;&#26377;&#20107;&#21153;&#23601;&#21152;&#20837;&#65292;&#20197;&#35835;&#21040;&#20107;&#21153;&#20013;&#26410;&#25552;&#20132;&#30340;&#25968;&#25454;)</p></li><li><p>NotSupported&#65306;&#27704;&#36828;&#19981;&#20351;&#29992;&#20107;&#21153;&#65292;&#22914;&#26524;&#24403;&#21069;&#26377;&#20107;&#21153;&#65292;&#25346;&#36215;&#20107;&#21153;&#12290;(&#37027;&#20123;&#26377;&#21487;&#33021;&#25243;&#24322;&#24120;&#20294;&#24322;&#24120;&#24182;&#19981;&#24433;&#21709;&#20840;&#23616;&#30340;&#26041;&#27861;)</p></li><li><p>Never&#65306;&#19981;&#33021;&#22312;&#26377;&#24403;&#21069;&#20107;&#21153;&#30340;&#24773;&#20917;&#19979;&#35843;&#29992;&#26412;&#26041;&#27861;&#12290;&#65288;&#29983;&#20154;&#21247;&#36817;?)</p></li></ul></div><p>&#21487;&#35265;&#65292;Required&#26159;&#40664;&#35748;&#30340;&#35774;&#32622;&#65292;Supports&#26159;&#21482;&#35835;&#26041;&#27861;&#30340;&#26368;&#20339;&#36873;&#25321;&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2669"></a>22.6.5.&nbsp;&#20107;&#21153;&#38548;&#31163;&#32423;&#21035;</h3></div></div></div><div class="itemizedlist"><ul type="disc"><li><p>ReadUncommited&#65306;&#26412;&#20107;&#21153;&#21487;&#20197;&#30475;&#21040;&#21478;&#19968;&#20107;&#21153;&#26410;&#25552;&#20132;&#30340;&#25968;&#25454;&#12290;&#33039;&#35835;&#12290;</p></li><li><p>ReadCommited&#65306;&#26412;&#20107;&#21153;&#21482;&#21487;&#20197;&#30475;&#21040;&#21478;&#19968;&#20107;&#21153;&#24050;&#25552;&#20132;&#30340;&#25968;&#25454;&#12290;&#19981;&#21487;&#37325;&#22797;&#35835;&#12290;</p></li><li><p>RepeatableRead&#65306;&#21487;&#37325;&#22797;&#35835;&#12290;&#22312;&#19968;&#20010;&#20107;&#21153;&#20869;&#65292;&#31532;&#19968;&#27425;&#35835;&#21040;&#30340;&#25968;&#25454;&#65292;&#22312;&#26412;&#20107;&#21153;&#27809;&#26377;&#25552;&#20132;&#21069;&#65292;&#26080;&#35770;&#21478;&#19968;&#20010;&#20107;&#21153;&#22914;&#20309;&#25552;&#20132;&#25968;&#25454;&#65292;&#26412;&#20107;&#21153;&#35835;&#21040;&#30340;&#25968;&#25454;&#37117;&#26159;&#19981;&#21464;&#30340;&#12290;</p></li><li><p>Serializable&#65306;&#20018;&#34892;&#21270;&#65292;&#21516;&#26102;&#21482;&#26377;&#19968;&#20010;&#20107;&#21153;&#33021;&#35835;&#30456;&#21516;&#30340;&#25968;&#25454;&#12290;</p></li></ul></div><p>&#32423;&#21035;&#36234;&#20302;&#36234;&#23433;&#20840;&#25928;&#29575;&#20063;&#36234;&#20302;&#12290;&#38548;&#31163;&#32423;&#21035;&#38656;&#35201;&#30456;&#20851;&#36164;&#28304;&#25903;&#25345;&#65292;&#22914;&#37325;&#22797;&#35835;&#22312;Oracle&#37324;&#20250;&#38477;&#32423;&#20026;ReadCommited&#12290;Spring&#37324;&#40664;&#35748;&#30340;Default&#32423;&#21035;&#23436;&#20840;&#30475;&#25968;&#25454;&#28304;&#30340;&#33080;&#33394;&#34892;&#20107;&#12290;</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2681"></a>22.6.6.&nbsp;&#20851;&#20110;Rollback</h3></div></div></div><p>EJB&#37324;&#65292;&#24819;rollback&#21482;&#33021;sessionContext.setRollbackOnly()&#25110;&#32773;&#25243;&#20986;EJBException&#12290;(EJB3&#36824;&#21487;&#20197;annotation&#35774;&#32622;&#26576;&#20123;&#33258;&#23450;&#20041;Exception&#21487;&#20197;&#35302;&#21457;rollback)</p><p>&#22312;Spring&#37324;&#65292;&#21516;&#26679;&#21482;&#20250;rollback unchecked exception(RuntimeExcption&#21450;&#23376;&#31867;)&#65292;&#32780;checked exception(Exception&#21450;&#23376;&#31867;)&#26159;&#19981;&#20250;rollback&#30340;&#65292;&#38500;&#38750;&#20320;&#29305;&#21035;&#22768;&#26126;&#12290;</p><pre class="programlisting">
 @Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW,rollbackFor = {MyException1.class,MyException2.class})
            </pre><p>&#22240;&#27492;&#25152;&#26377;&#22312;service&#23618;&#26041;&#27861;&#20013;&#29992;throws&#23450;&#20041;&#30340;Exception&#65292;&#37117;&#24517;&#39035;&#22312;&#20107;&#21153;&#23450;&#20041;&#20013;&#36827;&#34892;rollback&#35774;&#23450;&#12290;(&#35831;&#21247;&#21892;&#24536;)</p><p>&#25152;&#26377;&#22312;service&#23618;&#26041;&#27861;&#20013;&#34987;catch&#22788;&#29702;&#20102;&#30340;&#24322;&#24120;&#65292;&#21448;&#24076;&#26395;&#23481;&#22120;&#36741;&#21161;rollback&#30340;&#35805;&#65292;&#24517;&#39035;&#37325;&#25243;&#19968;&#20010;&#39044;&#23450;&#20041;&#30340;RuntimeException&#30340;&#23376;&#31867;&#12290;(&#35831;&#21247;&#22238;&#26395;)</p></div><div class="sect2" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="d4e2688"></a>22.6.7.&nbsp;&#20851;&#20110;Spring</h3></div></div></div><p>Spring&#19981;&#24076;&#26395;&#32534;&#31243;&#24335;&#20107;&#21153;&#31649;&#29702;&#12290;</p><p>Spring&#20063;&#19981;&#24076;&#26395;&#20351;&#29992;EJB CMT&#65292;CMT&#20381;&#36182;&#20110;EJB&#32780;&#26080;&#27861;&#29992;&#20110;POJO&#65292;&#20381;&#36182;&#20110;JTA&#20840;&#23616;&#20107;&#21153;&#23545;&#21333;&#25968;&#25454;&#28304;&#22330;&#26223;&#36896;&#25104;&#20102;&#28010;&#36153;&#65292;&#32780;&#19988;rollback&#26426;&#21046;&#27604;&#36739;&#40635;&#28902;&#65288;&#24517;&#39035;&#20026;EJBException&#25110;&#25163;&#24037;setRollbackOnly())&#12290;</p><p>&#22240;&#27492;Spring&#36890;&#36807;AOP&#23454;&#29616;&#20102;&#23545;POJO&#30340;&#25972;&#22871;&#23459;&#21578;&#24335;&#20107;&#21153;&#20307;&#31995;&#65307;&#23545;jdbc,hibernate,jpa,jms&#31561;local&#25968;&#25454;&#28304;&#21644;JTA&#23454;&#29616;&#20102;&#32479;&#19968;&#30340;&#20107;&#21153;&#31649;&#29702;&#26426;&#21046;&#65292;&#32780;&#19988;&#25903;&#25345;&#26412;&#22320;&#36164;&#28304;&#19982;JTA&#22312;&#37197;&#32622;&#25991;&#20214;&#32423;&#30340;&#20999;&#25442;&#65292;&#32780;&#19988;&#25913;&#36827;&#20102;rollback&#26426;&#21046;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#19968;&#20010;&#26412;&#22320;&#20107;&#21153;&#31649;&#29702;&#22120;&#65306;</p><pre class="programlisting">
&lt;bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"&gt;
    &lt;property name="entityManagerFactory" ref="entityManagerFactory" /&gt;
 &lt;/bean&gt;
                    </pre></li><li><p>Spring&#23601;&#20250;&#25226;&#35831;&#27714;&#37117;&#36716;&#21457;&#21040;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;JTA&#23545;&#35937;&#19978;&#65288;&#27880;&#24847;&#27492;&#26102;&#25968;&#25454;&#28304;&#20063;&#38656;&#35201;&#25913;&#20026;&#29992;JNDI&#20174;&#24212;&#29992;&#26381;&#21153;&#22120;&#33719;&#21462;)&#12290;</p><pre class="programlisting">
&lt;bean id="myTxManager" class="org.springframework.transaction.jta.JtaTransactionManager"/&gt;
                    </pre></li><li><p>&#24212;&#29992;&#26381;&#21153;&#22120;&#19987;&#26377;&#30340;&#31867;&#22411;&#30340;JTA&#20107;&#21153;&#31649;&#29702;&#22120;&#65306;</p><pre class="programlisting">
&lt;bean id="myTxManager" class="org.springframework.transaction.jta.WebLogicJtaTransactionManager"/&gt;
                    </pre></li></ul></div><p>&#22914;&#26524;&#19981;&#21916;&#27426;&#22312;&#37197;&#32622;&#25991;&#20214;&#37324;&#29992;AspectJ&#23450;&#20041;&#20107;&#21153;&#65292;&#21487;&#20197;&#20351;&#29992;Spring&#30340;@Transactional annotation&#22312;service&#23618;&#19978;&#36827;&#34892;&#26631;&#27880;&#12290;</p><p>&#23545;&#20110;&#21482;&#35835;&#30340;&#26041;&#27861;&#65292;&#21487;&#20197;&#21152;&#20837;@Transactional (readOnly=true) &#26631;&#27880;&#20197;&#25552;&#39640;&#24615;&#33021;&#12290;</p><p>&#22240;&#20026;Spring&#40664;&#35748;&#21482;&#23545;RuntimeException&#36827;&#34892;rollback&#65292;&#25152;&#20197;&#65306;</p><p>&#25152;&#26377;&#22312;service&#23618;&#26041;&#27861;&#20013;&#29992;throws&#23450;&#20041;&#30340;checkedException&#65292;&#37117;&#24517;&#39035;&#22312;@Transactional&#20013;&#23450;&#20041;rollbackclass&#12290;</p><p>&#25152;&#26377;&#22312;service&#23618;&#26041;&#27861;&#20013;catch&#22788;&#29702;&#20102;&#30340;Exception&#65292;&#21448;&#24076;&#26395;Spring&#36741;&#21161;rollback&#30340;&#35805;&#65292;&#24517;&#39035;&#37325;&#25243;&#19968;&#20010;RunTimeException&#65292;SpringSide&#37324;&#39044;&#23450;&#20041;&#20102;&#19968;&#20010;&#32479;&#19968;&#30340;ServiceException&#12290;</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="test.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="future.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;21&nbsp;&#31456;&nbsp;&#27979;&#35797;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;23&nbsp;&#31456;&nbsp;&#30475;&#21040;Spring Side&#25110;&#20854;&#20182;&#22320;&#26041;&#26377;&#20102;&#20363;&#23376;&#65292;&#20294;leona&#30340;&#25216;&#26415;&#36873;&#22411;&#37324;&#36824;&#27809;&#26377;&#23454;&#29616;&#30340;&#25216;&#26415;</td></tr></table></div></body></html>